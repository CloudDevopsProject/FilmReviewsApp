<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!--Fragment below will be used to allow common head element to extend to all other html pages -->
<head th:fragment="headElement">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="_csrf" th:content="${_csrf.token}" />
<!-- CDNs-->
<!--FontAwesome-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<!-- Bootstrap CSS-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" />
<!--External CSS File-->
<link th:href="@{/css/style.css}" href="/css/style.css" rel="stylesheet">


<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	

  	<meta name="viewport" content="width=device-width, initial-scale=1">
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

</head>
<body>

<div class="w3-top" th:fragment="navBar">
  <div class="w3-bar w3-white w3-padding w3-card" style="letter-spacing:4px; font-size:20px;" >
    <a class="w3-bar-item w3-button" th:href="@{/}">Home</a>
    <a class="w3-bar-item w3-button" href = "">Movie Reviews</a>
    <a class="w3-bar-item w3-button" th:href="@{/contact}">Contact</a>
    <!-- Right-sided navbar links. Hide them on small screens -->
    
    <!-- Only display the option to View Users if the user is a logged in admin -->
	
	<a sec:authorize="isAuthenticated()" th:if = "${#authentication.getPrincipal().getRoleId == 1}" class="w3-bar-item w3-button" th:href = "@{/displayUsers}">View Users</a>
	
    
    <div class="w3-right w3-hide-small">
   		<!--Register button if user is not logged in-->
      	<a sec:authorize="isAnonymous()" class="w3-bar-item w3-button" th:href="@{/register}">Register</a>
     
     	<!--Login Button if user is not logged in-->
		<a sec:authorize="isAnonymous()" class="w3-bar-item w3-button" th:href = "@{/displayLogin}">Login</a>			
     
     	<!-- Only display the option to Add review if the user is logged in-->   	
      	<a sec:authorize="isAuthenticated()" th:href = "@{/addReview}" th:if = "${#authentication.getPrincipal()!=null}" class="w3-bar-item w3-button">Add Review</a>
      	
      
     
      	<form class="form-inline" action="/logout" method="post" sec:authorize="isAuthenticated()">
					
					<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
					<button sec:authorize="isAuthenticated()" class="w3-bar-item w3-button"
						type="submit">Logout</button>
				</form>
      
     
    </div>
  </div>
</div>






	<!--Fragment below will be used to allow common navigation bar to extend to all other html pages -->
	<div id="navBar" >
		<nav class="navbar navbar-expand-lg">
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#links" aria-controls="links" aria-expanded="false"
				aria-label="Toggle navigation">
				<span><i class="fa fa-bars" aria-hidden="true"></i></span>
			</button>
			<div class="collapse navbar-collapse" id="links">
				<ul class="navbar-nav me-auto">
					<li class="nav-item"><a class="nav-link" th:href="@{/}">Home</a></li>
					<li class="nav-item"><a class="nav-link" href="">Movie Reviews</a></li>
					<li class="nav-item"><a class="nav-link" th:href="@{/contact}">Contact</a></li>
					<!-- Only display the option to View Users if the user is a logged in admin -->
					<li sec:authorize="isAuthenticated()"
						th:if="${#authentication.getPrincipal().getRoleId == 1}"
						class="nav-item"><a class="nav-link"
						th:href="@{/displayUsers}">View Users</a></li>
				</ul>
				<ul class="navbar-nav ml-auto">
					<!--Register button if user is not logged in-->
					<li class="nav-item" sec:authorize="isAnonymous()"><a
						class="nav-link" th:href="@{/register}">Register</a></li>
					<!--Login Button if user is not logged in-->
					<li class="nav-item" sec:authorize="isAnonymous()"><a
						class="nav-link" th:href="@{/displayLogin}">Login</a></li>
					<!-- Only display the option to Add review if the user is logged in-->
					<li sec:authorize="isAuthenticated()"
						th:if="${#authentication.getPrincipal()!=null}" class="nav-item">
						<a class="nav-link" th:href="@{/addReview}">Add Review</a>
					</li>
				</ul>
				<!--Logout Button if user is logged in-->
				<form class="form-inline" action="/logout" method="post"
					sec:authorize="isAuthenticated()">
					<input type="hidden" th:name="${_csrf.parameterName}"
						th:value="${_csrf.token}" />
					<button sec:authorize="isAuthenticated()" class="logoutBtn"
						type="submit">Logout</button>
				</form>
			</div>
		</nav>
	</div>
	
	
	
	<div th:fragment="jsScripts">
	<footer class="w3-light-grey w3-padding-32">
  		<p>Powered by Team200@NCI</p>
	</footer>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"></script>
	<script th:src="@{/js/scripts.js}"></script>
	</div>
</body>