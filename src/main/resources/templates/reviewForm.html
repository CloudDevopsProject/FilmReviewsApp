<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:include="htmlFragments :: headElement">
<title>Add Review</title>
</head>
<body>
	<!--Navigation Bar-->
	<div th:insert="htmlFragments :: navBar"></div>
	<h1>Add a movie review</h1>
	<!--Container for the form-->
	<div class="formWrap">
		<i class="fas fa-user-plus"></i>
		<h1>Add Review</h1>
		<form action="" method="post" id="reviewForm">
			<!--CSRF Token-->
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
			<!--Film Name-->
			<div class="form-group">
				<label for="filmName">Film Name</label> 
				<input type="text" class = "form-control" name="film" list="filmName" placeholder= "Name of film" onchange = "autoFillReviewFormDetails(this.value)">
    			<datalist id="filmName">
    				<th:block th:each = "film: ${films}">
    					<option th:value = "${film}" th:text = "${film.name}"></option>
    				</th:block>
   				 </datalist>
			</div>
			<!--Genre-->
			<div class="form-group">
				<label for="genre">Genre</label> 
				<input type="text" class="form-control" name="genre" list = "filmGenre" placeholder="Film Genre" required>
				<datalist id="filmGenre">
    				<th:block th:each = "genre: ${genres}">
    					<option th:value = "${genre}" th:text = "${genre.name}"></option>
    				</th:block>
   				 </datalist>
			</div>
			<!--Director-->
			<div class="form-group">
				<label for="director">Director(s)</label> 
				<input type="text" class="form-control" name="director" list = "filmDirector" placeholder="Film Director(s)" required>
				<datalist id="filmDirector">
    				<th:block th:each = "director: ${directors}">
    					<option th:value = "${director}" th:text = "${director.name}"></option>
    				</th:block>
   				 </datalist>
			</div>
			<!--Actors-->
			<div class="form-group">
				<label for="actor">Actor(s)</label> 
				<input type="text" class="form-control" name="actor" list = "filmActor" placeholder="Film Actor(s)" required>
				<datalist id="filmActor">
    				<th:block th:each = "actor: ${actors}">
    					<option th:value = "${actor}" th:text = "${actor.name}"></option>
    				</th:block>
   				 </datalist>
			</div>
			<div class="form-group">
				<!--Relase Year-->
				<label for="releaseYear">Release Year</label> 
				<select>
					<!--Threshold is set in controller class so the highest year possible to be selected is current year-->
					 <option th:each="i : ${#numbers.sequence(1900, {yearThreshold})}" th:value="${i}" th:text="${i}">
				</select>
				<label for="rating">Rating</label> 
				<select>
					 <option th:each="i : ${#numbers.sequence(0, 5)}" th:value="${i}" th:text="${i}">
				</select>
			</div>
			<div class="form-group">
				<textarea placeholder = "Leave your review"></textarea>
			</div>
			<div class="text-center">
				<button type="submit" class="btn btn-primary">Submit</button>
			</div>
		</form>
	</div>
	<!--JS Files-->
	<div th:insert="htmlFragments :: jsScripts"></div>
</body>